// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
/*
 * Device Tree Source for the RZ/V2M (r9a09g011) Evaluation Kit Board
 *
 * Copyright (C) 2022 Renesas Electronics Corp.
 */

/dts-v1/;
#include "r9a09g011.dtsi"
#include <dt-bindings/pinctrl/rzv2m-pinctrl.h>

/ {
	model = "RZ/V2M Evaluation Kit 2.0";
	compatible = "renesas,rzv2mevk2", "renesas,r9a09g011";

	aliases {
		serial0 = &uart0;
		ethernet0 = &avb;
	};

	chosen {
		stdout-path = "serial0:115200n8";
	};

	connector {
		compatible = "usb-c-connector";
		label = "USB-C";
		data-role = "dual";

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				hs_ep: endpoint {
					remote-endpoint = <&usb3_hs_ep>;
				};
			};

			port@1 {
				reg = <1>;
				ss_ep: endpoint {
					remote-endpoint = <&hd3ss3220_in_ep>;
				};
			};
		};
	};

	memory@58000000 {
		device_type = "memory";
		/*
		 * first 1.25GiB is reserved for ISP Firmware,
		 * next 128MiB is reserved for secure area.
		 */
		reg = <0x0 0x58000000 0x0 0x28000000>;
	};

	memory@180000000 {
		device_type = "memory";
		reg = <0x1 0x80000000 0x0 0x80000000>;
	};
};

&avb {
	renesas,no-ether-link;
	phy-handle = <&phy0>;
	phy-mode = "gmii";
	status = "okay";

	phy0: ethernet-phy@0 {
		compatible = "ethernet-phy-id001c.c916",
			     "ethernet-phy-ieee802.3-c22";
		reg = <0>;
	};
};

&extal_clk {
	clock-frequency = <48000000>;
};

&i2c0 {
	pinctrl-0 = <&i2c0_pins>;
	pinctrl-names = "default";
	clock-frequency = <400000>;
	status = "okay";

	hd3ss3220@47 {
		compatible = "ti,hd3ss3220";
		reg = <0x47>;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				hd3ss3220_in_ep: endpoint {
					remote-endpoint = <&ss_ep>;
				};
			};

			port@1 {
				reg = <1>;
				hd3ss3220_out_ep: endpoint {
					remote-endpoint = <&usb3_role_switch>;
				};
			};
		};
	};
};

&i2c2 {
	pinctrl-0 = <&i2c2_pins>;
	pinctrl-names = "default";
	clock-frequency = <100000>;
	status = "okay";
};

&pinctrl {
	i2c0_pins: i2c0 {
		pinmux = <RZV2M_PORT_PINMUX(5, 0, 2)>, /* SDA */
			 <RZV2M_PORT_PINMUX(5, 1, 2)>; /* SCL */
	};

	i2c2_pins: i2c2 {
		pinmux = <RZV2M_PORT_PINMUX(3, 8, 2)>, /* SDA */
			 <RZV2M_PORT_PINMUX(3, 9, 2)>; /* SCL */
	};

	uart0_pins: uart0 {
		pinmux = <RZV2M_PORT_PINMUX(3, 0, 2)>, /* UATX0 */
			 <RZV2M_PORT_PINMUX(3, 1, 2)>, /* UARX0 */
			 <RZV2M_PORT_PINMUX(3, 2, 2)>, /* UACTS0N */
			 <RZV2M_PORT_PINMUX(3, 3, 2)>; /* UARTS0N */
	};

	pwm8_pins: pwm8 {
		pinmux = <RZV2M_PORT_PINMUX(1, 8, 1)>;  /* PM8 */
	};

	pwm9_pins: pwm9 {
		pinmux = <RZV2M_PORT_PINMUX(1, 9, 1)>;  /* PM9 */
	};

	pwm10_pins: pwm10 {
		pinmux = <RZV2M_PORT_PINMUX(1, 10, 1)>; /* PM10 */
	};

	pwm11_pins: pwm11 {
		pinmux = <RZV2M_PORT_PINMUX(1, 11, 1)>; /* PM11 */
	};

	pwm12_pins: pwm12 {
		pinmux = <RZV2M_PORT_PINMUX(1, 12, 1)>; /* PM12 */
	};

	pwm13_pins: pwm13 {
		pinmux = <RZV2M_PORT_PINMUX(1, 13, 1)>; /* PM13 */
	};

	pwm14_pins: pwm14 {
		pinmux = <RZV2M_PORT_PINMUX(1, 14, 1)>; /* PM14 */
	};

	csi4_pins: csi4 {
		pinmux = <RZV2M_PORT_PINMUX(4, 0, 1)>, /* CSTXD4  */
			 <RZV2M_PORT_PINMUX(4, 1, 1)>, /* CSRXD4  */
			 <RZV2M_PORT_PINMUX(4, 2, 1)>, /* CSSCLK4 */
			 <RZV2M_PORT_PINMUX(4, 3, 1)>; /* CSCS4   */
       };
};

&pwm8 {
	pinctrl-0 = <&pwm8_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm9 {
	pinctrl-0 = <&pwm9_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm10 {
	pinctrl-0 = <&pwm10_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm11 {
	pinctrl-0 = <&pwm11_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm12 {
	pinctrl-0 = <&pwm12_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm13 {
	pinctrl-0 = <&pwm13_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwm14 {
	pinctrl-0 = <&pwm14_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&pwc {
	renesas,rzv2m-pwc-power;
	status = "okay";
};

&uart0 {
	pinctrl-0 = <&uart0_pins>;
	pinctrl-names = "default";

	uart-has-rtscts;
	status = "okay";
};

&csi4 {
	pinctrl-0 = <&csi4_pins>;
	pinctrl-names = "default";

	status = "okay";
	slavedev4: spi@0 {
		compatible = "rzv2m,slavedev";
		reg = <0>;
		spi-max-frequency = <24000000>;
		spi-cpha;
		spi-cpol;
	};
};

&usb3drd {
	status = "okay";
};

&usb3host {
	status = "okay";
};

&usb3peri {
	companion = <&usb3host>;
	status = "okay";
	usb-role-switch;

	ports {
		#address-cells = <1>;
		#size-cells = <0>;

		port@0 {
			reg = <0>;
			usb3_hs_ep: endpoint {
				remote-endpoint = <&hs_ep>;
			};
		};

		port@1 {
			reg = <1>;
			usb3_role_switch: endpoint {
				remote-endpoint = <&hd3ss3220_out_ep>;
			};
		};
	};
};

&wdt0 {
	status = "okay";
};

&tim8 {
    status = "okay";
};

&tim9 {
    status = "okay";
};

&tim10 {
    status = "okay";
};

&tim11 {
    status = "okay";
};

&tim12 {
    status = "okay";
};

&tim13 {
    status = "okay";
};

&tim14 {
    status = "okay";
};

&tim15 {
    status = "okay";
};

&tim16 {
    status = "okay";
};

&tim17 {
    status = "okay";
};

&tim18 {
    status = "okay";
};

&tim19 {
    status = "okay";
};

&tim20 {
    status = "okay";
};

&tim21 {
    status = "okay";
};

&tim22 {
    status = "okay";
};

&tim23 {
    status = "okay";
};
