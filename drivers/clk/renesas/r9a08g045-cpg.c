// SPDX-License-Identifier: GPL-2.0
/*
 * RZ/G3S CPG driver
 *
 * Copyright (C) 2022 Renesas Electronics Corp.
 */

#include <linux/clk-provider.h>
#include <linux/device.h>
#include <linux/init.h>
#include <linux/kernel.h>

#include <dt-bindings/clock/r9a08g045-cpg.h>

#include "rzg2l-cpg.h"

/* Specific SEL/DIV register offsets of RZ/G3S */
#define G3S_CPG_PL2_DDIV		(0x204)
#define G3S_CPG_PL3_DDIV		(0x208)
#define G3S_CPG_PL6_DDIV		(0x214)
#define G3S_CPG_SDHI_DDIV		(0x218)
#define G3S_CPG_OCTA_DDIV		(0x21C)
#define G3S_CPG_SPI_DDIV		(0x220)
#define G3S_CPG_PLL_DSEL		(0x240)
#define G3S_CPG_SDHI_DSEL		(0x244)
#define G3S_CPG_OCTA_SSEL		(0x400)
#define G3S_CPG_SPI_SSEL		(0x404)

/* Specific MSTOP register offsets of RZ/G3S */
#define MCPU3_MSTOP			(0xB90)
#define PERI_CPU2_MSTOP			(0xB94)

/* Specific division configuration of RZ/G3S */
#define DIVPL2B_G3S		DDIV_PACK(G3S_CPG_PL2_DDIV, 4, 3)
#define DIVPL6A_G3S		DDIV_PACK(G3S_CPG_PL6_DDIV, 0, 3)
#define DIVPL6B_G3S		DDIV_PACK(G3S_CPG_PL6_DDIV, 4, 3)
#define DIV_SDHI0_G3S		DDIV_PACK(G3S_CPG_SDHI_DDIV, 0, 1)
#define DIV_SDHI1_G3S		DDIV_PACK(G3S_CPG_SDHI_DDIV, 4, 1)
#define DIV_SDHI2_G3S		DDIV_PACK(G3S_CPG_SDHI_DDIV, 8, 1)
#define DIV_OCTA_G3S		DDIV_PACK(G3S_CPG_OCTA_DDIV, 0, 3)
#define DIV_SPI_G3S		DDIV_PACK(G3S_CPG_SPI_DDIV, 0, 3)

/* Specific clocks select of RZ/G3S */
#define SEL_PLL4_G3S		SEL_PLL_PACK(G3S_CPG_PLL_DSEL, 6, 1)
#define SEL_SDHI0_G3S		SEL_PLL_PACK(G3S_CPG_SDHI_DSEL, 0, 2)
#define SEL_SDHI1_G3S		SEL_PLL_PACK(G3S_CPG_SDHI_DSEL, 4, 2)
#define SEL_SDHI2_G3S		SEL_PLL_PACK(G3S_CPG_SDHI_DSEL, 8, 2)
#define SEL_OCTA_G3S		SEL_PLL_PACK(G3S_CPG_OCTA_SSEL, 0, 2)
#define SEL_SPI_G3S		SEL_PLL_PACK(G3S_CPG_SPI_SSEL, 0, 2)

enum clk_ids {
	/* Core Clock Outputs exported to DT */
	LAST_DT_CORE_CLK = R9A08G045_OSCCLK2,

	/* External Input Clocks */
	CLK_EXTAL,

	/* Internal Core Clocks */
	CLK_OSC_DIV1000,
	CLK_PLL1,
	CLK_PLL2,
	CLK_PLL2_DIV2,
	CLK_PLL2_DIV2_8,
	CLK_PLL2_DIV6,
	CLK_PLL3,
	CLK_PLL3_DIV2,
	CLK_PLL3_DIV2_2,
	CLK_PLL3_DIV2_4,
	CLK_PLL3_DIV2_8,
	CLK_PLL3_DIV6,
	CLK_PLL4,
	CLK_PLL6,
	CLK_PLL6_DIV2,
	CLK_SEL_SPI,
	CLK_SEL_OCTA,
	CLK_SEL_SDHI0,
	CLK_SEL_SDHI1,
	CLK_SEL_SDHI2,
	CLK_SEL_PLL4,
	CLK_P1_DIV2,
	CLK_P0_DIV2,
	CLK_P4_DIV2,
	CLK_P3_DIV2,
	CLK_SD0_DIV4,
	CLK_SD1_DIV4,
	CLK_SD2_DIV4,

	/* Module Clocks */
	MOD_CLK_BASE,
};

/* Divider tables */
static const struct clk_div_table dtable_1_2[] = {
	{0, 1},
	{1, 2},
	{0, 0},
};

static const struct clk_div_table dtable_1_8[] = {
	{0, 1},
	{1, 2},
	{2, 4},
	{3, 8},
	{0, 0},
};

static const struct clk_div_table dtable_1_32[] = {
	{0, 1},
	{1, 2},
	{2, 4},
	{3, 8},
	{4, 32},
	{0, 0},
};

/* Mux clock tables */
static const char * const sel_sdhi[] = { ".pll2_div2", ".pll6", ".pll2_div6" };
static const char * const sel_spi_octa[] = { ".pll3_div2_2", ".pll3_div6", ".pll6_div2" };
static const char * const sel_pll4[] = { ".osc_div1000", ".pll4" };

static const struct cpg_core_clk r9a08g045_core_clks[] __initconst = {
	/* External Clock Inputs */
	DEF_INPUT("extal", CLK_EXTAL),

	/* Internal Core Clocks */
	DEF_FIXED(".osc", R9A08G045_OSCCLK, CLK_EXTAL, 1, 1),
	DEF_FIXED(".osc2", R9A08G045_OSCCLK2, CLK_EXTAL, 1, 3),
	DEF_FIXED(".osc_div1000", CLK_OSC_DIV1000, CLK_EXTAL, 1, 1000),
	DEF_FIXED(".pll1", CLK_PLL1, CLK_EXTAL, 575, 12),
	DEF_FIXED(".pll2", CLK_PLL2, CLK_EXTAL, 200, 3),
	DEF_FIXED(".pll3", CLK_PLL3, CLK_EXTAL, 200, 3),
	DEF_FIXED(".pll4", CLK_PLL4, CLK_EXTAL, 100, 3),
	DEF_FIXED(".pll6", CLK_PLL6, CLK_EXTAL, 125, 6),
	DEF_FIXED(".pll2_div2", CLK_PLL2_DIV2, CLK_PLL2, 1, 2),
	DEF_FIXED(".pll2_div2_8", CLK_PLL2_DIV2_8, CLK_PLL2_DIV2, 1, 8),
	DEF_FIXED(".pll2_div6", CLK_PLL2_DIV6, CLK_PLL2, 1, 6),
	DEF_FIXED(".pll3_div2", CLK_PLL3_DIV2, CLK_PLL3, 1, 2),
	DEF_FIXED(".pll3_div2_2", CLK_PLL3_DIV2_2, CLK_PLL3_DIV2, 1, 2),
	DEF_FIXED(".pll3_div2_4", CLK_PLL3_DIV2_4, CLK_PLL3_DIV2, 1, 4),
	DEF_FIXED(".pll3_div2_8", CLK_PLL3_DIV2_8, CLK_PLL3_DIV2, 1, 8),
	DEF_FIXED(".pll3_div6", CLK_PLL3_DIV6, CLK_PLL3, 1, 6),
	DEF_FIXED(".pll6_div2", CLK_PLL6_DIV2, CLK_PLL6, 1, 2),
	DEF_MUX(".sel_spi", CLK_SEL_SPI, SEL_SPI_G3S, sel_spi_octa,
		ARRAY_SIZE(sel_spi_octa), 0, CLK_MUX_HIWORD_MASK),
	DEF_MUX(".sel_octa", CLK_SEL_OCTA, SEL_OCTA_G3S, sel_spi_octa,
		ARRAY_SIZE(sel_spi_octa), 0, CLK_MUX_HIWORD_MASK),
	DEF_SD_MUX("SD0", R9A08G045_CLK_SD0, SEL_SDHI0_G3S,
		sel_sdhi, ARRAY_SIZE(sel_sdhi)),
	DEF_SD_MUX("SD1", R9A08G045_CLK_SD1, SEL_SDHI1_G3S,
		sel_sdhi, ARRAY_SIZE(sel_sdhi)),
	DEF_SD_MUX("SD2", R9A08G045_CLK_SD2, SEL_SDHI2_G3S,
		sel_sdhi, ARRAY_SIZE(sel_sdhi)),
	DEF_MUX(".sel_pll4", CLK_SEL_PLL4, SEL_PLL4_G3S, sel_pll4,
		ARRAY_SIZE(sel_pll4), 0, CLK_MUX_HIWORD_MASK),

	/* Core output clk */
	DEF_DIV("I", R9A08G045_CLK_I, CLK_PLL1, DIVPL1A, dtable_1_8,
		CLK_DIVIDER_HIWORD_MASK),
	DEF_DIV("I2", R9A08G045_CLK_I2, CLK_PLL6_DIV2, DIVPL6A_G3S,
		dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_DIV("I3", R9A08G045_CLK_I3, CLK_PLL6_DIV2, DIVPL6B_G3S,
		dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("S0", R9A08G045_CLK_S0, CLK_SEL_PLL4, 1, 2),
	DEF_DIV("P0", R9A08G045_CLK_P0, CLK_PLL2_DIV2_8, DIVPL2B_G3S,
		dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("P0_DIV2", CLK_P0_DIV2, R9A08G045_CLK_P0, 1, 2),
	DEF_DIV("P1", R9A08G045_CLK_P1, CLK_PLL3_DIV2_4,
		DIVPL3A, dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("P1_DIV2", CLK_P1_DIV2, R9A08G045_CLK_P1, 1, 2),
	DEF_DIV("P2", R9A08G045_CLK_P2, CLK_PLL3_DIV2_8,
		DIVPL3B, dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_DIV("P3", R9A08G045_CLK_P3, CLK_PLL3_DIV2_4,
		DIVPL3C, dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("P3_DIV2", CLK_P3_DIV2, R9A08G045_CLK_P3, 1, 2),
	DEF_FIXED("P4", R9A08G045_CLK_P4, CLK_PLL2_DIV2, 1, 5),
	DEF_FIXED("P4_DIV2", CLK_P4_DIV2, R9A08G045_CLK_P4, 1, 2),
	DEF_FIXED("P5", R9A08G045_CLK_P5, CLK_PLL2_DIV2, 1, 4),
	DEF_FIXED("M0", R9A08G045_CLK_M0, CLK_PLL3_DIV2_4, 1, 1),
	DEF_FIXED("ZT", R9A08G045_CLK_ZT, CLK_PLL3_DIV2_8, 1, 1),
	DEF_FIXED("HP", R9A08G045_CLK_HP, CLK_PLL6, 1, 2),
	DEF_DIV("SPI0", R9A08G045_CLK_SPI0, CLK_SEL_SPI,
		DIV_SPI_G3S, dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("SPI1", R9A08G045_CLK_SPI1, R9A08G045_CLK_SPI0, 1, 2),
	DEF_DIV("OC0", R9A08G045_CLK_OC0, CLK_SEL_OCTA,
		DIV_OCTA_G3S, dtable_1_32, CLK_DIVIDER_HIWORD_MASK),
	DEF_FIXED("OC1", R9A08G045_CLK_OC1, CLK_SEL_OCTA, 1, 2),
	DEF_FIXED("SD0_DIV4", CLK_SD0_DIV4, R9A08G045_CLK_SD0, 1, 4),
	DEF_FIXED("SD1_DIV4", CLK_SD1_DIV4, R9A08G045_CLK_SD1, 1, 4),
	DEF_FIXED("SD2_DIV4", CLK_SD2_DIV4, R9A08G045_CLK_SD2, 1, 4),
	DEF_FIXED("TSU", R9A08G045_CLK_TSU, CLK_PLL2_DIV2, 1, 8),
};

static struct rzg2l_mod_clk r9a08g045_mod_clks[] = {
	DEF_MOD("gic",		R9A08G045_GIC600_GICCLK, R9A08G045_CLK_P1,
				0x514, 0, 0),
	DEF_MOD("ia55_pclk",	R9A08G045_IA55_PCLK, R9A08G045_CLK_P2,
				0x518, 0, 0),
	DEF_MOD("ia55_clk",	R9A08G045_IA55_CLK, R9A08G045_CLK_P1,
				0x518, 1, MSTOP(PERI_CPU_MSTOP, BIT(13))),
	DEF_MOD("dmac_aclk",	R9A08G045_DMAC_ACLK, R9A08G045_CLK_P3,
				0x52c, 0, MSTOP(REG1_MSTOP, BIT(2) | BIT(3))),
	DEF_MOD("dmac_pclk",	R9A08G045_DMAC_PCLK, CLK_P3_DIV2,
				0x52c, 1, 0),
	DEF_MOD("ostm0_pclk",	R9A08G045_OSTM0_PCLK, R9A08G045_CLK_P0,
				0x534, 0, MSTOP(REG0_MSTOP, BIT(4))),
	DEF_MOD("ostm1_pclk",	R9A08G045_OSTM1_PCLK, R9A08G045_CLK_P0,
				0x534, 1, MSTOP(REG0_MSTOP, BIT(5))),
	DEF_MOD("ostm2_pclk",	R9A08G045_OSTM2_PCLK, R9A08G045_CLK_P0,
				0x534, 2, MSTOP(REG0_MSTOP, BIT(6))),
	DEF_MOD("ostm3_pclk",	R9A08G045_OSTM3_PCLK, R9A08G045_CLK_P0,
				0x534, 3, MSTOP(REG0_MSTOP, BIT(7))),
	DEF_MOD("ostm4_pclk",	R9A08G045_OSTM4_PCLK, R9A08G045_CLK_P0,
				0x534, 4, MSTOP(REG0_MSTOP, BIT(8))),
	DEF_MOD("ostm5_pclk",	R9A08G045_OSTM5_PCLK, R9A08G045_CLK_P0,
				0x534, 5, MSTOP(REG0_MSTOP, BIT(9))),
	DEF_MOD("ostm6_pclk",	R9A08G045_OSTM6_PCLK, R9A08G045_CLK_P0,
				0x534, 6, MSTOP(REG0_MSTOP, BIT(10))),
	DEF_MOD("ostm7_pclk",	R9A08G045_OSTM7_PCLK, R9A08G045_CLK_P0,
				0x534, 7, MSTOP(REG0_MSTOP, BIT(11))),
	DEF_MOD("mtu_x_mck",	R9A08G045_MTU_X_MCK_MTU3, R9A08G045_CLK_P0,
				0x538, 0, MSTOP(MCPU1_MSTOP, BIT(2))),
	DEF_MOD("poe3",		R9A08G045_POE3_CLKM_POE, R9A08G045_CLK_P0,
				0x53C, 0, MSTOP(MCPU1_MSTOP, BIT(9))),
	DEF_MOD("gpt",		R9A08G045_GPT_PCLK, R9A08G045_CLK_P0,
				0x540, 0, MSTOP(MCPU3_MSTOP, BIT(5))),
	DEF_MOD("poeg_a",	R9A08G045_POEG_A_CLKP, R9A08G045_CLK_P0,
				0x544, 0, 0),
	DEF_MOD("poeg_b",	R9A08G045_POEG_B_CLKP, R9A08G045_CLK_P0,
				0x544, 1, 0),
	DEF_MOD("poeg_c",	R9A08G045_POEG_C_CLKP, R9A08G045_CLK_P0,
				0x544, 2, 0),
	DEF_MOD("poeg_d",	R9A08G045_POEG_D_CLKP, R9A08G045_CLK_P0,
				0x544, 3, 0),
	DEF_MOD("wdt0_pclk",	R9A08G045_WDT0_PCLK, R9A08G045_CLK_P0,
				0x548, 0, 0),
	DEF_MOD("wdt0_clk",	R9A08G045_WDT0_CLK, R9A08G045_OSCCLK,
				0x548, 1, MSTOP(REG0_MSTOP, BIT(0))),
	DEF_MOD("spi_hclk",	R9A08G045_SPI_HCLK, R9A08G045_CLK_P3,
				0x550, 0, 0),
	DEF_MOD("spi_aclk",	R9A08G045_SPI_ACLK, R9A08G045_CLK_P3,
				0x550, 1, 0),
	DEF_MOD("spi_clk",	R9A08G045_SPI_CLK, R9A08G045_CLK_SPI1,
				0x550, 2, MSTOP(MCPU1_MSTOP, BIT(1))),
	DEF_MOD("spi_clkx2",	R9A08G045_SPI_CLKX2, R9A08G045_CLK_SPI0,
				0x550, 3, 0),
	DEF_MOD("sdhi0_imclk",	R9A08G045_SDHI0_IMCLK, CLK_SD0_DIV4,
				0x554, 0, MSTOP(PERI_COM_MSTOP, BIT(0))),
	DEF_MOD("sdhi0_imclk2",	R9A08G045_SDHI0_IMCLK2, CLK_SD0_DIV4,
				0x554, 1, 0),
	DEF_MOD("sdhi0_clk_hs",	R9A08G045_SDHI0_CLK_HS, R9A08G045_CLK_SD0,
				0x554, 2, 0),
	DEF_MOD("sdhi0_aclk",	R9A08G045_SDHI0_ACLK, R9A08G045_CLK_P1,
				0x554, 3, 0),
	DEF_MOD("sdhi1_imclk",	R9A08G045_SDHI1_IMCLK, CLK_SD1_DIV4,
				0x554, 4, MSTOP(PERI_COM_MSTOP, BIT(1))),
	DEF_MOD("sdhi1_imclk2",	R9A08G045_SDHI1_IMCLK2, CLK_SD1_DIV4,
				0x554, 5, 0),
	DEF_MOD("sdhi1_clk_hs",	R9A08G045_SDHI1_CLK_HS, R9A08G045_CLK_SD1,
				0x554, 6, 0),
	DEF_MOD("sdhi1_aclk",	R9A08G045_SDHI1_ACLK, R9A08G045_CLK_P1,
				0x554, 7, 0),
	DEF_MOD("sdhi2_imclk",	R9A08G045_SDHI2_IMCLK, CLK_SD2_DIV4,
				0x554, 8, 0),
	DEF_MOD("sdhi2_imclk2",	R9A08G045_SDHI2_IMCLK2, CLK_SD2_DIV4,
				0x554, 9, 0),
	DEF_MOD("sdhi2_clk_hs",	R9A08G045_SDHI2_CLK_HS, R9A08G045_CLK_SD2,
				0x554, 10, 0),
	DEF_MOD("sdhi2_aclk",	R9A08G045_SDHI2_ACLK, R9A08G045_CLK_P1,
				0x554, 11, 0),
	DEF_MOD("ssi0_pclk",	R9A08G045_SSI0_PCLK2, R9A08G045_CLK_P0,
				0x570, 0, MSTOP(MCPU1_MSTOP, BIT(10))),
	DEF_MOD("ssi0_sfr",	R9A08G045_SSI0_PCLK_SFR, R9A08G045_CLK_P0,
				0x570, 1, 0),
	DEF_MOD("ssi1_pclk",	R9A08G045_SSI1_PCLK2, R9A08G045_CLK_P0,
				0x570, 2, MSTOP(MCPU1_MSTOP, BIT(11))),
	DEF_MOD("ssi1_sfr",	R9A08G045_SSI1_PCLK_SFR, R9A08G045_CLK_P0,
				0x570, 3, 0),
	DEF_MOD("ssi2_pclk",	R9A08G045_SSI2_PCLK2, R9A08G045_CLK_P0,
				0x570, 4, MSTOP(MCPU1_MSTOP, BIT(12))),
	DEF_MOD("ssi2_sfr",	R9A08G045_SSI2_PCLK_SFR, R9A08G045_CLK_P0,
				0x570, 5, 0),
	DEF_MOD("ssi3_pclk",	R9A08G045_SSI3_PCLK2, R9A08G045_CLK_P0,
				0x570, 6, MSTOP(MCPU1_MSTOP, BIT(13))),
	DEF_MOD("ssi3_sfr",	R9A08G045_SSI3_PCLK_SFR, R9A08G045_CLK_P0,
				0x570, 7, 0),
	DEF_MOD("src",		R9A08G045_SRC_CLKP, R9A08G045_CLK_P0,
				0x574, 0, MSTOP(MCPU1_MSTOP, BIT(3))),
	DEF_MOD("usb0_host",	R9A08G045_USB_U2H0_HCLK, R9A08G045_CLK_P1,
				0x578, 0, 0),
	DEF_MOD("usb1_host",	R9A08G045_USB_U2H1_HCLK, R9A08G045_CLK_P1,
				0x578, 1, 0),
	DEF_MOD("usb0_func",	R9A08G045_USB_U2P_EXR_CPUCLK, R9A08G045_CLK_P1,
				0x578, 2, 0),
	DEF_MOD("usb_pclk",	R9A08G045_USB_PCLK, R9A08G045_CLK_P1,
				0x578, 3, MSTOP(PERI_COM_MSTOP,
					  BIT(4) | BIT(5) | BIT(6) | BIT(7))),
	DEF_COUPLED("eth0_axi",	R9A08G045_ETH0_CLK_AXI, R9A08G045_CLK_M0,
				0x57c, 0, MSTOP(PERI_COM_MSTOP, BIT(2))),
	DEF_COUPLED("eth0_chi",	R9A08G045_ETH0_CLK_CHI, R9A08G045_CLK_ZT,
				0x57c, 0, 0),
	DEF_COUPLED("eth1_axi",	R9A08G045_ETH1_CLK_AXI, R9A08G045_CLK_M0,
				0x57c, 1, MSTOP(PERI_COM_MSTOP, BIT(3))),
	DEF_COUPLED("eth1_chi",	R9A08G045_ETH1_CLK_CHI, R9A08G045_CLK_ZT,
				0x57c, 1, 0),
	DEF_MOD("i2c0",		R9A08G045_I2C0_PCLK, R9A08G045_CLK_P0,
				0x580, 0, MSTOP(MCPU2_MSTOP, BIT(10))),
	DEF_MOD("i2c1",		R9A08G045_I2C1_PCLK, R9A08G045_CLK_P0,
				0x580, 1, MSTOP(MCPU2_MSTOP, BIT(11))),
	DEF_MOD("i2c2",		R9A08G045_I2C2_PCLK, R9A08G045_CLK_P0,
				0x580, 2, MSTOP(MCPU2_MSTOP, BIT(12))),
	DEF_MOD("i2c3",		R9A08G045_I2C3_PCLK, R9A08G045_CLK_P0,
				0x580, 3, MSTOP(MCPU2_MSTOP, BIT(13))),
	DEF_MOD("scif0",	R9A08G045_SCIF0_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 0, MSTOP(MCPU2_MSTOP, BIT(1))),
	DEF_MOD("scif1",	R9A08G045_SCIF1_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 1, MSTOP(MCPU2_MSTOP, BIT(2))),
	DEF_MOD("scif2",	R9A08G045_SCIF2_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 2, MSTOP(MCPU2_MSTOP, BIT(3))),
	DEF_MOD("scif3",	R9A08G045_SCIF3_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 3, MSTOP(MCPU2_MSTOP, BIT(4))),
	DEF_MOD("scif4",	R9A08G045_SCIF4_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 4, MSTOP(MCPU2_MSTOP, BIT(5))),
	DEF_MOD("scif5",	R9A08G045_SCIF5_CLK_PCK, R9A08G045_CLK_P0,
				0x584, 5, MSTOP(MCPU3_MSTOP, BIT(4))),
	DEF_MOD("sci0",		R9A08G045_SCI0_CLKP, R9A08G045_CLK_P0,
				0x588, 0, MSTOP(MCPU2_MSTOP, BIT(7))),
	DEF_MOD("sci1",		R9A08G045_SCI1_CLKP, R9A08G045_CLK_P0,
				0x588, 1, MSTOP(MCPU2_MSTOP, BIT(8))),
	DEF_MOD("rspi0",	R9A08G045_RSPI0_CLKB, R9A08G045_CLK_P0,
				0x590, 0, MSTOP(MCPU1_MSTOP, BIT(14))),
	DEF_MOD("rspi1",	R9A08G045_RSPI1_CLKB, R9A08G045_CLK_P0,
				0x590, 1, MSTOP(MCPU1_MSTOP, BIT(15))),
	DEF_MOD("rspi2",	R9A08G045_RSPI2_CLKB, R9A08G045_CLK_P0,
				0x590, 2, MSTOP(MCPU2_MSTOP, BIT(0))),
	DEF_MOD("rspi3",	R9A08G045_RSPI3_CLKB, R9A08G045_CLK_P0,
				0x590, 3, MSTOP(MCPU3_MSTOP, BIT(2))),
	DEF_MOD("rspi4",	R9A08G045_RSPI4_CLKB, R9A08G045_CLK_P0,
				0x590, 4, MSTOP(MCPU3_MSTOP, BIT(3))),
	DEF_MOD("canfd",	R9A08G045_CANFD_PCLK, CLK_P4_DIV2,
				0x594, 0, MSTOP(MCPU2_MSTOP, BIT(9))),
	DEF_MOD("canfd_ramclk",	R9A08G045_CANFD_CLK_RAM, R9A08G045_CLK_P4,
				0x594, 1, 0),
	DEF_MOD("gpio",		R9A08G045_GPIO_HCLK, R9A08G045_OSCCLK,
				0x598, 0, 0),
	DEF_MOD("adc_adclk",	R9A08G045_ADC_ADCLK, R9A08G045_CLK_TSU,
				0x5a8, 0, MSTOP(MCPU2_MSTOP, BIT(14))),
	DEF_MOD("adc_pclk",	R9A08G045_ADC_PCLK, R9A08G045_CLK_TSU,
				0x5a8, 1, 0),
	DEF_MOD("tsu_pclk",	R9A08G045_TSU_PCLK, R9A08G045_CLK_TSU,
				0x5ac, 0, MSTOP(MCPU2_MSTOP, BIT(15))),
	DEF_MOD("octa_aclk",	R9A08G045_OCTA_ACLK, R9A08G045_CLK_OC1,
				0x5f4, 0, 0),
	DEF_MOD("octa_mclk",	R9A08G045_OCTA_MCLK, R9A08G045_CLK_OC0,
				0x5f4, 1, MSTOP(MCPU3_MSTOP, BIT(0))),
	DEF_MOD("pdm_pclk",	R9A08G045_PDM_PCLK, R9A08G045_CLK_P0,
				0x604, 0, 0),
	DEF_MOD("pdm_cclk",	R9A08G045_PDM_CCLK, R9A08G045_OSCCLK2,
				0x604, 1, MSTOP(MCPU3_MSTOP, BIT(9))),
	DEF_MOD("pci_aclk",	R9A08G045_PCI_ACLK, R9A08G045_CLK_M0,
				0x608, 0, 0),
	DEF_MOD("pci_clk1pm",	R9A08G045_PCI_CLKL1PM, R9A08G045_CLK_ZT,
				0x608, 1, 0),
	DEF_MOD("spdif_pclk",	R9A08G045_SPDIF_PCLK, R9A08G045_CLK_P0,
				0x60c, 0, MSTOP(MCPU3_MSTOP, BIT(6))),
	DEF_MOD("i3c_tclk",	R9A08G045_I3C_TCLK, R9A08G045_CLK_P5,
				0x610, 1, MSTOP(MCPU3_MSTOP, BIT(10))),
	DEF_MOD("i3c_pclk",	R9A08G045_I3C_PCLK, R9A08G045_CLK_TSU,
				0x610, 0, 0),
	DEF_MOD("vbat_bclk",	R9A08G045_VBAT_BCLK, R9A08G045_OSCCLK,
				0x614, 0, MSTOP(MCPU3_MSTOP, BIT(8))),
};

static struct rzg2l_reset r9a08g045_resets[] = {
	DEF_RST(R9A08G045_GIC600_GICRESET_N, 0x814, 0),
	DEF_RST(R9A08G045_GIC600_DBG_GICRESET_N, 0x814, 1),
	DEF_RST(R9A08G045_IA55_RESETN, 0x818, 0),
	DEF_RST(R9A08G045_DMAC_ARESETN, 0x82c, 0),
	DEF_RST(R9A08G045_DMAC_RST_ASYNC, 0x82c, 1),
	DEF_RST(R9A08G045_OSTM0_PRESETZ, 0x834, 0),
	DEF_RST(R9A08G045_OSTM1_PRESETZ, 0x834, 1),
	DEF_RST(R9A08G045_OSTM2_PRESETZ, 0x834, 2),
	DEF_RST(R9A08G045_OSTM3_PRESETZ, 0x834, 3),
	DEF_RST(R9A08G045_OSTM4_PRESETZ, 0x834, 4),
	DEF_RST(R9A08G045_OSTM5_PRESETZ, 0x834, 5),
	DEF_RST(R9A08G045_OSTM6_PRESETZ, 0x834, 6),
	DEF_RST(R9A08G045_OSTM7_PRESETZ, 0x834, 7),
	DEF_RST(R9A08G045_MTU_X_PRESET_MTU3, 0x838, 0),
	DEF_RST(R9A08G045_POE3_RST_M_REG, 0x83c, 0),
	DEF_RST(R9A08G045_GPT_RST_C, 0x840, 0),
	DEF_RST(R9A08G045_POEG_A_RST, 0x844, 0),
	DEF_RST(R9A08G045_POEG_B_RST, 0x844, 1),
	DEF_RST(R9A08G045_POEG_C_RST, 0x844, 2),
	DEF_RST(R9A08G045_POEG_D_RST, 0x844, 3),
	DEF_RST(R9A08G045_WDT0_PRESETN, 0x848, 0),
	DEF_RST(R9A08G045_SPI_HRESETN, 0x850, 0),
	DEF_RST(R9A08G045_SPI_ARESETN, 0x850, 1),
	DEF_RST(R9A08G045_SDHI0_IXRST, 0x854, 0),
	DEF_RST(R9A08G045_SDHI1_IXRST, 0x854, 1),
	DEF_RST(R9A08G045_SDHI2_IXRST, 0x854, 2),
	DEF_RST(R9A08G045_SSI0_RST_M2_REG, 0x870, 0),
	DEF_RST(R9A08G045_SSI1_RST_M2_REG, 0x870, 1),
	DEF_RST(R9A08G045_SSI2_RST_M2_REG, 0x870, 2),
	DEF_RST(R9A08G045_SSI3_RST_M2_REG, 0x870, 3),
	DEF_RST(R9A08G045_SRC_RST, 0x874, 0),
	DEF_RST(R9A08G045_USB_U2H0_HRESETN, 0x878, 0),
	DEF_RST(R9A08G045_USB_U2H1_HRESETN, 0x878, 1),
	DEF_RST(R9A08G045_USB_U2P_EXL_SYSRST, 0x878, 2),
	DEF_RST(R9A08G045_USB_PRESETN, 0x878, 3),
	DEF_RST(R9A08G045_ETH0_RST_HW_N, 0x87c, 0),
	DEF_RST(R9A08G045_ETH1_RST_HW_N, 0x87c, 1),
	DEF_RST(R9A08G045_I2C0_MRST, 0x880, 0),
	DEF_RST(R9A08G045_I2C1_MRST, 0x880, 1),
	DEF_RST(R9A08G045_I2C2_MRST, 0x880, 2),
	DEF_RST(R9A08G045_I2C3_MRST, 0x880, 3),
	DEF_RST(R9A08G045_SCIF0_RST_SYSTEM_N, 0x884, 0),
	DEF_RST(R9A08G045_SCIF1_RST_SYSTEM_N, 0x884, 1),
	DEF_RST(R9A08G045_SCIF2_RST_SYSTEM_N, 0x884, 2),
	DEF_RST(R9A08G045_SCIF3_RST_SYSTEM_N, 0x884, 3),
	DEF_RST(R9A08G045_SCIF4_RST_SYSTEM_N, 0x884, 4),
	DEF_RST(R9A08G045_SCIF5_RST_SYSTEM_N, 0x884, 5),
	DEF_RST(R9A08G045_SCI0_RST, 0x888, 0),
	DEF_RST(R9A08G045_SCI1_RST, 0x888, 1),
	DEF_RST(R9A08G045_RSPI0_RST, 0x890, 0),
	DEF_RST(R9A08G045_RSPI1_RST, 0x890, 1),
	DEF_RST(R9A08G045_RSPI2_RST, 0x890, 2),
	DEF_RST(R9A08G045_RSPI3_RST, 0x890, 3),
	DEF_RST(R9A08G045_RSPI4_RST, 0x890, 4),
	DEF_RST(R9A08G045_CANFD_RSTP_N, 0x894, 0),
	DEF_RST(R9A08G045_CANFD_RSTC_N, 0x894, 1),
	DEF_RST(R9A08G045_GPIO_RSTN, 0x898, 0),
	DEF_RST(R9A08G045_GPIO_PORT_RESETN, 0x898, 1),
	DEF_RST(R9A08G045_GPIO_SPARE_RESETN, 0x898, 2),
	DEF_RST(R9A08G045_ADC_PRESETN, 0x8a8, 0),
	DEF_RST(R9A08G045_ADC_ADRST_N, 0x8a8, 1),
	DEF_RST(R9A08G045_TSU_PRESETN, 0x8ac, 0),
	DEF_RST(R9A08G045_OCTA_ARESETN, 0x8f4, 0),
	DEF_RST(R9A08G045_PDM0_PRESETNT, 0x904, 0),
	DEF_RST(R9A08G045_PCI_ARESETN, 0x908, 0),
	DEF_RST(R9A08G045_PCI_RST_B, 0x908, 1),
	DEF_RST(R9A08G045_PCI_RST_GP_B, 0x908, 2),
	DEF_RST(R9A08G045_PCI_RST_PS_B, 0x908, 3),
	DEF_RST(R9A08G045_PCI_RST_RSM_B, 0x908, 4),
	DEF_RST(R9A08G045_PCI_RST_CFG_B, 0x908, 5),
	DEF_RST(R9A08G045_PCI_RST_LOAD_B, 0x908, 6),
	DEF_RST(R9A08G045_SPDIF_RST, 0x90c, 0),
	DEF_RST(R9A08G045_I3C_TRESETN, 0x910, 0),
	DEF_RST(R9A08G045_I3C_PRESETN, 0x910, 1),
	DEF_RST(R9A08G045_VBAT_BRESETN, 0x914, 0),
};

static const unsigned int r9a08g045_crit_mod_clks[] __initconst = {
	MOD_CLK_BASE + R9A08G045_GIC600_GICCLK,
	MOD_CLK_BASE + R9A08G045_IA55_PCLK,
	MOD_CLK_BASE + R9A08G045_IA55_CLK,
	MOD_CLK_BASE + R9A08G045_DMAC_ACLK,
};

const struct rzg2l_cpg_info r9a08g045_cpg_info = {
	/* Core Clocks */
	.core_clks = r9a08g045_core_clks,
	.num_core_clks = ARRAY_SIZE(r9a08g045_core_clks),
	.last_dt_core_clk = LAST_DT_CORE_CLK,
	.num_total_core_clks = MOD_CLK_BASE,

	/* Critical Module Clocks */
	.crit_mod_clks = r9a08g045_crit_mod_clks,
	.num_crit_mod_clks = ARRAY_SIZE(r9a08g045_crit_mod_clks),

	/* Module Clocks */
	.mod_clks = r9a08g045_mod_clks,
	.num_mod_clks = ARRAY_SIZE(r9a08g045_mod_clks),
	.num_hw_mod_clks = R9A08G045_VBAT_BCLK + 1,

	/* Resets */
	.resets = r9a08g045_resets,
	.num_resets = R9A08G045_VBAT_BRESETN + 1, /* Last reset ID + 1 */
};
